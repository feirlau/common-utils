(function(){"use strict";if("undefined"==typeof r){for(var e=0,n=["ms","moz","webkit","o"],t=0;t<n.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[n[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[t]+"CancelAnimationFrame"]||window[n[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),i=Math.max(0,16-(t-e)),r=window.setTimeout(function(){n(t+i)},i);return e=t+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)}),window.requestAnimFrame=window.requestAnimationFrame;var i=this,r=function(){};r.HandlerInfo=function(e,n){this.handler=e,this.preframe=0,this.timeInfo=new r.TimeInfo(0,0,n)},r.TimeInfo=function(e,n,t){this.frame=e,this.time=n,this.preTime=0,this.interval=t?t:1},r.TimeInfo.prototype.getIntervalCount=function(e){return e||(e=this.interval),(this.time-this.preTime)/e|0},r.TimeInfo.prototype.sync=function(e){e&&(this.frame=e.frame,this.time=e.time,this.preTime=e.preTime,this.interval=e.interval)},r.prefps=30,r.fps=30,r.requestId=0,r.timeInfo=new r.TimeInfo(0,0,1e3/30),r.on=function(e){e&&(r.fps=e),r.requestId||(r.requestId=requestAnimationFrame(r.frameHandler))},r.off=function(){r.requestId&&cancelAnimationFrame(r.requestId)},r.frameHandler=function(e){var n,t;if(r.requestId=requestAnimationFrame(r.frameHandler),r.fps!=r.prefps&&(r.prefps=r.fps,r.timeInfo.interval=1e3/r.fps),r.timeInfo.time=e,!(0!=r.timeInfo.frame&&r.timeInfo.getIntervalCount()<1)){for(n=0;n<r.handlers.length;n+=1)t=r.handlers[n],t.timeInfo.time=e,(0==t.preframe||r.timeInfo.frame-t.preframe>=t.timeInfo.interval)&&(t.handler.call(t,t.timeInfo),t.timeInfo.frame+=1,t.timeInfo.preTime=e,t.preframe=r.timeInfo.frame);r.timeInfo.preTime=e,r.timeInfo.frame+=1}},r.add=function(e,n){var t=r.get(e);return null==t?(t=new r.HandlerInfo(e,n),r.handlers.push(t)):n&&(t.timeInfo.interval=n),t},r.remove=function(e){var n,t=r.get(e);return t&&(n=r.handlers.indexOf(t),r.handlers.splice(n,1)),t},r.handlers=[],r.get=function(e){var n,t;for(n=r.handlers.length-1;n>=0;n-=1)if(t=handlers[n],t&&t.handler==e)return t;return null},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports.FPS=r):i.FPS=r}}).call(this);